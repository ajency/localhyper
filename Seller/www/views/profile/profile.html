<ion-view 
	view-title="My Profile"
	ng-init="view.init();">

	<ion-content>

		<div class="list list-inset">
			<ion-item>
				Business: <b>{{view.businessName}}</b>
			</ion-item>

			<ion-item>
				Name: <b>{{view.name}}</b>
			</ion-item>

			<ion-item>
				Phone Number: <b>+91-{{view.phone}}</b>
			</ion-item>
		</div>

		<div class="row">
			<div class="col card">
				<div class=" item-text-wrap">
					Available Credit Points
					<br>
					<div class="row">
						<div class="col col-50">
							<h3>{{view.creditAvailable}}</h3>
						</div>
						<div class="col" ng-click="App.navigate('credit-history');">
							</br>
							View Details
						</div>
					</div>
				</div>
			</div>
			<div class="col card">
				<div class=" item-text-wrap">
					Auto Offer
				</div>
				<div class="item-text-wrap">
		        	<div class="pull-right">
						<label class="toggle toggle-assertive">
							<input type="checkbox">
							<div class="track">
								<div class="handle"></div>
							</div>
						</label>
					</div>
				</div>	
			</div>
		</div>

		<div class="card">
			<div class="item item-divider ">
				My Bussiness Categories
				
				<button
					class="button button-outline button-assertive icon-btn pull-right"
					ng-click="App.navigate('categories')">
					<i class="icon ion-plus"></i>
				</button>
				<button
					class="button button-outline button-assertive icon-btn pull-right"
					ng-click="view.showDelete = !view.showDelete;">
					<i class="icon ion-trash-a"></i>
				</button>
			</div>

			<ion-list show-delete="view.showDelete">
				<ion-item 
					class="item item-text-wrap cat-chain item-icon-left" 
					ng-repeat="chains in view.categoryChains track by $index"
					ng-click="view.onChainClick(chains)">

						<ion-delete-button 
						class="ion-trash-a"
						ng-click="view.removeItemFromChains(chains.subCategory.id)">
						</ion-delete-button>

						<div class="lighter-nh">
							{{chains.category.name}} <i class="ion-ios-arrow-forward"></i> 
							<span class="darker">{{chains.subCategory.name}}</span>
						</div>
						<div class="highlight">
							{{view.getBrands(chains.brands)}}
						</div>
				
				</ion-item>
				
				<h5 class="subdued item-text-wrap" ng-if="view.categoryChains.length == 0;">
					Choose the categories and brands you deal with. 
					You shall receive requests based on the categories you select.
				</h5>
			</ion-list>
		</div>

		<div class="list card">
			<a class="item item-text-wrap item-icon-left">
				<i class="icon ion-information-circled"></i>
				You receive request from customer for products under categories you added here
			</a>
		</div>

		<button 
			class="button button-dark button-block" 
			ng-click="App.navigate('business-details');">
 			Edit Bussiness Details
		</button>

		<button 
			class="button button-assertive button-block" 
			ng-click="view.saveDetails();"
			ng-disabled="view.categoryChains.length == 0">
			Save
		</button>

	</ion-content>

</ion-view>
